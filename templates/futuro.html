{% extends "layout.html" %}

{% block title %}
    Productos
{% endblock %}

{% block main %}

<link rel="stylesheet" href="static/css/button.css">

<link rel="stylesheet" href="static/css/navbar.css">

<section class="p-4 my-container">
    
    <div class="navbar1">
        <div class="left-content">
            <button  type="submit" class="btn prueba btn-primary mb-4" id="menu-btn">
                <i class="fas fa-bars"></i> Menú
            </button>
        </div>
        <a href="/logout"> 
                <i class="fa-solid fa-right-from-bracket"></i> Cerrar Sesión
        </a>  
        {% if session["user_id"][0][1] == 'admin' %}

        <a href="/edituser"> Usuarios </a>
        {% endif %}
    </div>
    
    {% if session["user_id"][0][1] == 'admin' %}

    <div class="text-center  mb-4 mx-3">
        <a class="prueba" href="/reporteventas">Reporte ventas</a>
        <a href="/reportecompras" class="prueba">Reporte Compras</a>
    </div>
    {% endif %}


    <div class="container">
      <div class="row" >
              <div class="col-6"  id="myChart">
              </div>

              <div class="col-6" id="mychart2"> 
              </div>
      </div>
  </div>

  <div class="container">
    <div class="row" id="chart3">
    </div>
  </div>
    

 <!--js propio-->
 <script src="/static/js/navbar.js"></script>

 <!--iconos font awesome-->
 <script src="https://kit.fontawesome.com/72d2ae7f6d.js" crossorigin="anonymous"></script>
 <!--js bootstraps-->


 <!--js chartjs-->
 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

 <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

 <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.27.3/dist/apexcharts.min.js"></script>


<script>
   
   var data2 = {{ data2|tojson }};
   var options = {
     series: data2.data,
     chart: {
     width: 500,
     type: 'donut',
     dropShadow: {
       enabled: true,
       color: '#111',
       top: -1,
       left: 3,
       blur: 3,
       opacity: 0.2
     }
   },
   stroke: {
     width: 0,
   },
   plotOptions: {
     pie: {
       donut: {
         labels: {
           show: true,
           total: {
             showAlways: true,
             show: true
           }
         }
       }
     }
   },
   labels:data2.labels,
   dataLabels: {
     dropShadow: {
       blur: 3,
       opacity: 0.8
     }
   },
   fill: {
   type: 'pattern',
     opacity: 1,
     pattern: {
       enabled: true,
       style: ['verticalLines', 'squares', 'horizontalLines', 'circles','slantedLines'],
     },
   },
   states: {
     hover: {
       filter: 'none'
     }
   },
   theme: {
     palette: 'palette2'
   },
   title: {
     text: " Productos con mayor Stock"
   },
   responsive: [{
     breakpoint: 480,
     options: {
       chart: {
         width: 200
       },
       legend: {
         position: 'bottom'
       }
     }
   }]
   };

   var chart = new ApexCharts(document.querySelector("#mychart2"), options);
   chart.render();


   var data3 = {{ data3|tojson }};

   var options = {
     series: [{
     data: data3.data}],
     chart: {
     type: 'bar',
     height: 380
   },
   plotOptions: {
     bar: {
       barHeight: '100%',
       distributed: true,
       horizontal: true,
       dataLabels: {
         position: 'bottom'
       },
     }
   },
   colors: ['#33b2df', '#546E7A', '#d4526e', '#13d8aa', '#A5978B', '#2b908f', '#f9a3a4', '#90ee7e'
   ],
   dataLabels: {
     enabled: true,
     textAnchor: 'start',
     style: {
       colors: ['#fff']
     },
     formatter: function (val, opt) {
       return opt.w.globals.labels[opt.dataPointIndex] + ":  " + val
     },
     offsetX: 0,
     dropShadow: {
       enabled: true
     }
   },
   stroke: {
     width: 1,
     colors: ['#fff']
   },
   xaxis: {
     categories: data3.labels,
   },
   yaxis: {
     labels: {
       show: false
     }
   },
   title: {
       text: 'Proveedores',
       align: 'center',
       floating: true
   },
   subtitle: {
       text: 'Proveedores destacados de la tienda',
       align: 'center',
   },
   tooltip: {
     theme: 'dark',
     x: {
       show: false
     },
     y: {
       title: {
         formatter: function () {
           return ''
         }
       }
     }
   }
   };

   var chart = new ApexCharts(document.querySelector("#myChart"), options);
   chart.render();
 
</script>
{% endblock %}